---
import { formatDate } from "@/lib/date";
import type { BlogEntry } from "@/lib/content";

interface Props {
  post: BlogEntry;
}

const { post } = Astro.props;

const categoryLabel: Record<BlogEntry["data"]["category"], string> = {
  learn: "Learn",
  build: "Build",
  think: "Think"
};
---

<article class="panel group rounded-xl border p-5 transition hover:-translate-y-1 hover:shadow-glow">
  <div class="flex items-center justify-between text-[11px] uppercase tracking-[0.14em] text-ink/56">
    <span class="font-mono">{categoryLabel[post.data.category]}</span>
    <span class="font-mono">{post.data.readTime}</span>
  </div>

  <h3 class="mt-4 font-display text-xl leading-tight text-ink">
    <a href={`/blog/${post.slug}`}>{post.data.title}</a>
  </h3>

  <p class="mt-3 text-sm leading-6 text-ink/72">{post.data.summary}</p>

  <div class="mt-4 flex flex-wrap items-center gap-2 text-xs text-ink/55">
    <time datetime={post.data.publishedAt.toISOString()}>{formatDate(post.data.publishedAt)}</time>
    <span>Â·</span>
    {post.data.tags.slice(0, 3).map((tag) => (
      <span class="border border-line/80 bg-paper px-2 py-0.5 font-mono">#{tag}</span>
    ))}
  </div>
</article>
